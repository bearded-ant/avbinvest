# Анализ ситуации

- Проверяю метрики (RPS, CPU, RAM, network, 5xx, latency) и логи Nginx.
- Определяю тип трафика: нормальный рост нагрузки или аномалия.
- Смотрю, какие endpoints перегружены, есть ли всплески из отдельных IP/регионов/ботов.

## Если трафик штатный (рост пользователей или пиковая нагрузка)
- Масштабирую сервис: добавляю поды/инстансы, увеличиваю ресурсы.
- Перераспределяю нагрузку через балансировщик или кеширование.
- Проверяю базу и внешние сервисы — нет ли узкого места.
- При необходимости включаю rate limiting для тяжёлых endpoints.

## Если трафик подозрительный или похож на атаку
- Временно масштабируюсь, чтобы выиграть время для анализа.
- Включаю защиту: WAF / firewall правила, rate limit / request throttling, капча / challenge на специфические URL.
- Анализирую паттерн запросов: одинаковые User-Agent, IP-диапазон, один endpoint.
- Блокирую источники: IP, подсети, страны, определённые сигнатуры запросов.
- При необходимости включаю CDN с защитой от L7/L3 атак (Cloudflare, AWS Shield).
